<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.cell.*?>
<?import com.github.gaborfeher.grantmaster.ui.cells.*?>

<VBox xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.github.gaborfeher.grantmaster.ui.ProjectBudgetLimitsTabController">
  <children>
    <HBox>
      <children>
        <Label text="%ProjectBudgetLimitsFilterDates" />
        <DatePicker fx:id="filterStartDate" onAction="#filterUpdateAction" />
        <Label text="-" />
        <DatePicker fx:id="filterEndDate" onAction="#filterUpdateAction" />
        <Button onAction="#filterResetButtonAction" text="%ProjectBudgetLimitsFilterResetButton" /> 
      </children>
    </HBox>
    <Button text="%ProjectBudgetLimitAddButtonLabel" onAction="#createButtonAction" />    
    <TableView editable="true" fx:id="table" VBox.vgrow="ALWAYS" >
      <rowFactory>
        <SummaryHighlighterRowFactory />
      </rowFactory>
      <columns>
        <TableColumn prefWidth="150" sortable="false">
          <cellFactory>
            <EditButtonTableCellFactory />
          </cellFactory>
          <cellValueFactory>
            <PropertyValueFactory property="state" /> 
          </cellValueFactory>
        </TableColumn>
        <TableColumn text="%ExpenseType" prefWidth="400" sortable="false">
          <cellFactory>
            <ExpenseTypeTableCellFactory property="expenseType" direction="PAYMENT"/>  
          </cellFactory>
          <cellValueFactory>
            <PropertyValueFactory property="expenseType" /> 
          </cellValueFactory>
        </TableColumn>
        <TableColumn text="%ProjectBudgetLimitColumnPercentage" styleClass="numColumn" sortable="false">
          <cellFactory>
            <DoubleTableCellFactory property="budgetPercentage" />
          </cellFactory>
          <cellValueFactory>
            <PropertyValueFactory property="budgetPercentage" /> 
          </cellValueFactory>
        </TableColumn>
        <TableColumn prefWidth="350" text="%BudgetLimitValueColumn">
          <columns>
            <TableColumn fx:id="budgetAccountingCurrencyColumn" styleClass="numColumn" sortable="false" editable="false" prefWidth="100">
              <cellFactory>
                <DoubleTableCellFactory property="budgetAccountingCurrency" /> 
              </cellFactory>
              <cellValueFactory>
                <PropertyValueFactory property="budgetAccountingCurrency" />
              </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="budgetGrantCurrencyColumn" styleClass="numColumn" sortable="false" editable="true" prefWidth="100">
              <cellFactory>
                <DoubleTableCellFactory property="budgetGrantCurrency" /> 
              </cellFactory>
              <cellValueFactory>
                <PropertyValueFactory property="budgetGrantCurrency" />
              </cellValueFactory>
            </TableColumn>
          </columns>
        </TableColumn>
        <TableColumn text="%BudgetLimitSpentColumn" prefWidth="350" fx:id="spentColumn" styleClass="numColumn" editable="false" sortable="false">
          <columns>
            <TableColumn fx:id="spentAccountingCurrencyColumn" styleClass="numColumn" editable="false" sortable="false" prefWidth="100">
              <cellFactory>
                <DoubleTableCellFactory property="spentAccountingCurrency" /> 
              </cellFactory>
              <cellValueFactory>
                <PropertyValueFactory property="spentAccountingCurrency" />
              </cellValueFactory>              
            </TableColumn>
            <TableColumn fx:id="spentGrantCurrencyColumn" styleClass="numColumn" editable="false" sortable="false" prefWidth="100">
              <cellFactory>
                <DoubleTableCellFactory property="spentGrantCurrency" /> 
              </cellFactory>
              <cellValueFactory>
                <PropertyValueFactory property="spentGrantCurrency" />
              </cellValueFactory>              
            </TableColumn>
          </columns>
        </TableColumn>
        <TableColumn prefWidth="350" text="%BudgetLimitRemainingColumn">
          <columns>
            <TableColumn fx:id="remainingAccountingCurrencyColumn" styleClass="numColumn" sortable="false" editable="false" prefWidth="100">
              <cellFactory>
                <DoubleTableCellFactory property="remainingAccountingCurrency" /> 
              </cellFactory>
              <cellValueFactory>
                <PropertyValueFactory property="remainingAccountingCurrency" />
              </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="remainingGrantCurrencyColumn" styleClass="numColumn" sortable="false" editable="false" prefWidth="100">
              <cellFactory>
                <DoubleTableCellFactory property="remainingGrantCurrency" /> 
              </cellFactory>
              <cellValueFactory>
                <PropertyValueFactory property="remainingGrantCurrency" />
              </cellValueFactory>
            </TableColumn>
          </columns>
        </TableColumn>   
      </columns>
    </TableView>
  </children> 
</VBox>
